Task 4 - 
Write a simple HTTP client that connects to a URL, sends a request, and displays the response headers and body.

import java.net.URI;
import java.net.http.HttpClient;
import java.net.http.HttpRequest;
import java.net.http.HttpResponse;
import java.io.IOException;

public class SimpleHttpClient {
    public static void main(String[] args) throws IOException, InterruptedException {
        String url = "https://www.example.com"; // Replace with the URL you want to connect to

        HttpClient client = HttpClient.newHttpClient();
        HttpRequest request = HttpRequest.newBuilder()
                .uri(URI.create(url))
                .GET() // Or .POST(), .PUT(), .DELETE(), etc. as needed
                .build();

        HttpResponse<String> response = client.send(request, HttpResponse.BodyHandlers.ofString());

        System.out.println("Status Code: " + response.statusCode());

        // Print headers (optional, but good practice)
        System.out.println("\nHeaders:");
        response.headers().map().forEach((k, v) -> System.out.println(k + ": " + v));

        System.out.println("\nBody:");
        System.out.println(response.body());
    }
}

Task 5: Java Networking and Serialization
Develop a basic TCP client and server application where the client sends a serialized object with 2 numbers and operation  to be performed on them to the server, and the server computes the result and sends it back to the client. for eg, we could send  2, 2, "+" which would mean 2 + 2

// Server.java
import java.io.*;
import java.net.*;

public class Server {
    public static void main(String[] args) throws IOException, ClassNotFoundException {
        try (ServerSocket serverSocket = new ServerSocket(12345);
             Socket clientSocket = serverSocket.accept();
             ObjectInputStream in = new ObjectInputStream(clientSocket.getInputStream());
             ObjectOutputStream out = new ObjectOutputStream(clientSocket.getOutputStream())) {

            Calculation calc = (Calculation) in.readObject();
            int result = calc.calculate();
            out.writeObject(result);

        }
    }
}

// Client.java
import java.io.*;
import java.net.*;
import java.util.Scanner;

public class Client {
    public static void main(String[] args) throws IOException, ClassNotFoundException {
        try (Socket socket = new Socket("localhost", 12345);
             ObjectOutputStream out = new ObjectOutputStream(socket.getOutputStream());
             ObjectInputStream in = new ObjectInputStream(socket.getInputStream());
             Scanner scanner = new Scanner(System.in)) {

            System.out.print("Enter number 1: ");
            int num1 = scanner.nextInt();
            System.out.print("Enter number 2: ");
            int num2 = scanner.nextInt();
            System.out.print("Enter operation (+, -, *, /): ");
            String operation = scanner.next();

            Calculation calc = new Calculation(num1, num2, operation);
            out.writeObject(calc);

            int result = (int) in.readObject();
            System.out.println("Result: " + result);

        }
    }
}

// Calculation.java (Same for both client and server)
import java.io.Serializable;

class Calculation implements Serializable {
    int num1;
    int num2;
    String operation;

    public Calculation(int num1, int num2, String operation) {
        this.num1 = num1;
        this.num2 = num2;
        this.operation = operation;
    }

    public int calculate() {
        switch (operation) {
            case "+": return num1 + num2;
            case "-": return num1 - num2;
            case "*": return num1 * num2;
            case "/": return num1 / num2; // No divide by zero check in this simplified version
            default: throw new IllegalArgumentException("Invalid operation");
        }
    }
}

Day 8:
Task 1: Establishing Database Connections
Write a Java program that connects to a SQLite database and prints out the connection object to confirm successful connection.

if (conn != null) {
                System.out.println("Connection to SQLite has been established.");
                System.out.println("Connection Object: " + conn);
            }

        } catch (SQLException e) {
            System.out.println(e.getMessage());
        } finally {
            try {
                if (conn != null) {
                    conn.close();
                    System.out.println("Connection closed.");
                }
            } catch (SQLException ex) {
                System.out.println(ex.getMessage());
            }
        }

Task 2: SQL Queries using JDBC
Create a table 'User' with a following schema 'User ID' and 'Password' stored as hash format (note you have research on how to generate hash from a string), accept "User ID" and "Password" as input and check in the table if they match to confirm whether user access is allowed or not.


import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.Scanner;
import java.security.MessageDigest;
import java.security.NoSuchAlgorithmException;

public class UserAuthentication {

    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);

        try {
            Class.forName("com.mysql.cj.jdbc.Driver");
            Connection conn = DriverManager.getConnection("jdbc:mysql://localhost:3306/wipro_db", "root", "admin");

            // Create table if it doesn't exist (Good practice)
            String createTableQuery = "CREATE TABLE IF NOT EXISTS User (" +
                    "UserID VARCHAR(255) PRIMARY KEY," +
                    "Password VARCHAR(255)" +
                    ")";
            conn.createStatement().execute(createTableQuery);


            System.out.print("Enter User ID: ");
            String userId = scanner.nextLine();

            System.out.print("Enter Password: ");
            String password = scanner.nextLine();

            String hashedPassword = generateHash(password); // Hash the input password

            // Check if the user exists and the password matches
            String selectQuery = "SELECT * FROM User WHERE UserID = ? AND Password = ?";
            PreparedStatement pstmt = conn.prepareStatement(selectQuery);
            pstmt.setString(1, userId);
            pstmt.setString(2, hashedPassword);

            ResultSet rs = pstmt.executeQuery();

            if (rs.next()) {
                System.out.println("User access granted.");
            } else {
                System.out.println("Invalid User ID or Password.");
            }

            rs.close();
            pstmt.close();
            conn.close();
            scanner.close();

        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        } catch (SQLException e) {
            e.printStackTrace();
        } catch (NoSuchAlgorithmException e) {
            e.printStackTrace();
        }
    }

    // Method to generate SHA-256 hash of a string
    public static String generateHash(String password) throws NoSuchAlgorithmException {
        MessageDigest md = MessageDigest.getInstance("SHA-256");
        byte[] hashBytes = md.digest(password.getBytes());

        // Convert byte array to a hexadecimal string
        StringBuilder sb = new StringBuilder();
        for (byte b : hashBytes) {
            sb.append(String.format("%02x", b));
        }
        return sb.toString();
    }
}


Task3 - Modify the SELECT query program to use PreparedStatement to parameterize the query and prevent SQL injection.

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet; // Import ResultSet
import java.sql.SQLException;
import java.util.Scanner;  // Import Scanner

public class JdbcCrudOperations {

    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in); // Initialize Scanner

        try {
            Class.forName("com.mysql.cj.jdbc.Driver");
            Connection conn = DriverManager.getConnection("jdbc:mysql://localhost:3306/wipro_db", "root", "admin");

            System.out.print("Enter Employee ID to search: ");
            int empId = scanner.nextInt(); // Get employee ID from user
            scanner.nextLine(); // Consume newline character left by nextInt()

            String selectQuery = "SELECT * FROM Employees WHERE eid = ?"; // Parameterized query

            PreparedStatement pstmt = conn.prepareStatement(selectQuery);
            pstmt.setInt(1, empId); // Set the parameter value

            ResultSet rs = pstmt.executeQuery(); // Execute the query

            if (rs.next()) { // Check if any rows were returned
                System.out.println("Employee found:");
                System.out.println("ID: " + rs.getInt("eid"));
                System.out.println("Name: " + rs.getString("ename"));
                System.out.println("Salary: " + rs.getDouble("salary"));
                // ... print other columns as needed
            } else {
                System.out.println("Employee not found.");
            }

            rs.close(); // Close ResultSet
            pstmt.close(); // Close PreparedStatement
            conn.close(); // Close Connection
            scanner.close(); // Close Scanner

        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }
}
